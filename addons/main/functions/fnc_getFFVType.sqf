#include "script_component.hpp"
/*
* Author: Ampersand
* Choose the type of FFV helper vehicle based on the unit's crew animation
*
* Arguments:
* 0: Unit <OBJECT>
*
* Return Value:
* FFV Type <STRING>
*
* rwyl_main_fnc_getFFVType
*/

params ["_unit"];

private _bodySelections = ["leftfoot","rightfoot","head","leftleg","rightleg","rightupleg","leftupleg","rightarm","rightforearm","leftforearm","leftarm","righthand","spine3","spine1"];
private _ffvBodySelectionPositions = [["rwyl_main_passenger_inside_1",[[-0.150384,0.57593,-0.220496],[0.202365,0.578884,-0.202771],[-0.000596941,0.104286,0.766136],[-0.150704,0.463802,0.0670549],[0.167705,0.460942,0.0731356],[0.157139,0.285856,0.171803],[-0.130664,0.312086,0.172995],[0.233516,0.0399717,0.413837],[0.223572,0.125405,0.406907],[-0.0929024,0.293193,0.354921],[-0.1761,0.111219,0.432341],[0.195226,0.973266,0.843066],[-0.00539528,0.053331,0.449693],[0.00100916,0.0265493,0.172811]]],["rwyl_main_passenger_inside_2",[[-0.161593,0.489906,-0.272041],[0.202686,0.523029,-0.26693],[7.88923e-06,0.00935337,0.78594],[-0.165677,0.402811,-0.0315573],[0.182401,0.417756,-0.0142008],[0.160269,0.252617,0.125688],[-0.141873,0.275589,0.116828],[0.230488,0.0371065,0.415669],[0.222001,0.123451,0.408218],[-0.0880205,0.289655,0.357481],[-0.163516,0.103657,0.436764],[0.195139,0.973066,0.843172],[-0.00784357,0.018328,0.478175],[-0.00808338,0.004094,0.195016]]],["rwyl_main_passenger_inside_3",[[-0.11763,0.531825,-0.572172],[0.221558,0.559051,-0.555357],[0.000138125,0.0536409,0.770763],[-0.131012,0.442921,-0.273107],[0.197858,0.448925,-0.274331],[0.159391,0.252131,-0.0119053],[-0.122033,0.26737,-0.0107401],[0.22686,-0.05888,0.450925],[0.224116,0.0489586,0.395109],[-0.0964916,0.234345,0.330466],[-0.163536,0.0481914,0.418631],[-0.028605,0.809419,0.95664],[-0.0079634,-0.0248536,0.454533],[-0.00819878,-0.0546096,0.181297]]],["rwyl_main_passenger_inside_4",[[-0.00525126,0.469673,-0.228951],[-0.0728471,-0.0611226,-0.206112],[0.118631,0.196646,0.739157],[-0.0113543,0.399437,0.0649582],[0.144369,0.117437,-0.174049],[0.209065,0.145163,-0.121478],[-0.0475925,0.278523,0.179339],[0.246248,-0.0302737,0.394924],[0.265719,0.0751388,0.337073],[0.00434448,0.415552,0.398364],[-0.113457,0.251115,0.466354],[0.632788,0.777665,0.886344],[0.0536261,0.0631265,0.449976],[-0.00221972,-0.0132778,0.189982]]],["rwyl_main_passenger_inside_5",[[-0.14631,0.414277,-0.228348],[-0.00535445,-0.305717,-0.166074],[-0.0171487,0.242045,0.85083],[-0.139656,0.356474,0.0589494],[0.0257098,-0.0145437,-0.154214],[0.0799124,0.102536,-0.0562424],[-0.119646,0.230565,0.207823],[0.19039,0.0684547,0.545174],[0.159574,0.177121,0.489641],[-0.21586,0.355782,0.464158],[-0.234903,0.187509,0.511875],[0.0631282,0.908878,1.10224],[-0.0218801,0.0866225,0.557272],[-0.015898,0.0072743,0.291433]]],["rwyl_main_passenger_inside_6",[[-0.165588,0.379327,-0.702219],[0.22402,0.357225,-0.693974],[0.0356835,0.187623,0.794437],[-0.149637,0.324587,-0.416278],[0.176423,0.30969,-0.415899],[0.140306,0.202208,-0.0868109],[-0.112277,0.222782,-0.0918553],[0.216248,0.0417069,0.465662],[0.198742,0.191901,0.415218],[-0.176736,0.394909,0.387835],[-0.204484,0.218521,0.454961],[0.167923,1.012,0.915202],[0.0055416,0.0858514,0.48523],[-0.00719828,0.0416951,0.211516]]],["rwyl_main_passenger_inside_7",[[-0.118695,0.485346,-0.362454],[0.214903,0.509039,-0.352363],[0.0271076,0.384649,0.683955],[-0.120887,0.421371,-0.0825201],[0.193709,0.424424,-0.0763144],[0.165139,0.2594,0.0897632],[-0.121592,0.284772,0.0878604],[0.294554,0.250851,0.405921],[0.264469,0.369383,0.348317],[-0.151847,0.414925,0.27911],[-0.168673,0.258257,0.378828],[-0.234583,0.971237,0.913334],[0.0137989,0.169637,0.433922],[0.000412452,0.0190166,0.202311]]],["rwyl_main_passenger_inside_8",[[-0.11772,0.531832,-0.572266],[0.221428,0.559061,-0.555377],[0.000104426,0.0538922,0.770548],[-0.13107,0.442915,-0.273168],[0.197794,0.448928,-0.274346],[0.159384,0.252127,-0.0119146],[-0.12206,0.267365,-0.0107424],[0.22684,-0.0587931,0.450794],[0.224086,0.0489208,0.394972],[-0.0967043,0.234536,0.330348],[-0.163798,0.0483293,0.418467],[-0.0286534,0.809529,0.956139],[-0.00797504,-0.0247604,0.454394],[-0.00819287,-0.0545581,0.181193]]],["rwyl_main_passenger_bench_1",[[-0.196759,0.427646,-0.541242],[0.142663,0.407489,-0.511009],[0.0430602,0.0999136,0.72548],[-0.201425,0.326429,-0.244069],[0.125891,0.337189,-0.211927],[0.120923,0.158164,0.0198114],[-0.161882,0.14255,0.00081595],[0.250483,-0.074891,0.384819],[0.205786,0.0231168,0.288221],[-0.18899,0.136549,0.275848],[-0.188181,-0.0254923,0.434992],[-0.0262161,0.905375,0.59951],[0.0200422,-0.0735497,0.448927],[0.00125269,-0.157276,0.187984]]],["rwyl_main_passenger_boat_1",[[-0.260923,-0.592119,-0.290143],[0.23773,-0.745267,-0.0127115],[0.00855196,0.707023,0.197789],[-0.266554,-0.300049,-0.254887],[0.280466,-0.459192,-0.0625639],[0.256852,-0.1627,-0.0323968],[-0.19665,-0.0644647,-0.155276],[0.220646,0.504109,0.00161688],[0.235402,0.611532,-0.0741301],[-0.192475,0.738746,-0.0600815],[-0.279399,0.641362,-0.00613776],[0.0519571,1.08861,0.703953],[-0.00369921,0.417972,0.0711505],[0.00701812,0.139168,0.0607941]]],["rwyl_main_passenger_boat_2",[[-0.184323,-0.701702,-0.036473],[0.380154,-0.567764,-0.337673],[0.194961,0.674413,0.240617],[-0.197384,-0.426829,-0.100084],[0.359725,-0.303155,-0.251569],[0.279276,-0.0722705,-0.108497],[-0.1852,-0.144681,-0.0791416],[0.38771,0.48871,0.0859861],[0.378182,0.649006,0.0311436],[0.0811421,0.975758,0.0414213],[-0.0172326,0.797943,0.0351608],[0.644763,1.13099,0.70039],[0.0926122,0.415077,0.0819975],[0.0270136,0.144495,0.0568616]]],["rwyl_main_passenger_boat_3",[[0.368915,0.210217,0.017943],[0.438997,-0.350893,0.0348821],[0.0855579,0.285511,0.770722],[0.0552837,0.259073,0.0547929],[0.420617,-0.0884826,0.054271],[0.337401,0.033224,0.088444],[-0.102655,0.150725,0.114151],[0.328092,0.084702,0.556647],[0.317419,0.219062,0.506007],[-0.151678,0.381702,0.459577],[-0.179838,0.256568,0.474682],[0.0947536,0.74937,1.22089],[0.0400108,0.0841065,0.517591],[0.0237866,-0.0526026,0.277364]]],["rwyl_main_passenger_boat_4",[[0.205791,0.47548,0.0310102],[-0.114389,0.728347,0.127372],[-0.0343635,0.247854,0.756071],[-0.108173,0.389655,0.0568733],[-0.00562481,0.465191,0.179552],[0.0839403,0.13903,0.185822],[-0.206337,0.235189,0.0678104],[0.258029,0.149067,0.520207],[0.248541,0.258043,0.483432],[-0.236214,0.431012,0.50398],[-0.292694,0.26235,0.477895],[0.0419744,0.771985,1.24723],[-0.00430146,0.0641702,0.482796],[0.00566638,-0.0298084,0.220233]]],["rwyl_main_passenger_flatground_1",[[-0.137164,0.582888,-0.0325273],[0.261147,0.797242,0.0309238],[0.00174046,-0.0583696,0.689521],[-0.188463,0.333167,0.179122],[0.213002,0.502955,0.140542],[0.151573,0.183008,0.135511],[-0.168753,0.11509,0.180924],[0.250885,-0.133394,0.367995],[0.245819,0.0145162,0.282633],[-0.260412,0.141035,0.38561],[-0.267612,-0.071862,0.417816],[0.724196,0.738869,0.288899],[-0.0190266,-0.157419,0.380142],[-0.0139238,-0.10159,0.109246]]],["rwyl_main_passenger_flatground_2",[[-0.130014,0.471426,-0.0382085],[0.146814,0.467329,-0.0298516],[-0.0239413,-0.0321987,0.65847],[-0.186029,0.241431,0.189519],[0.164072,0.254569,0.198006],[0.168177,0.0835516,0.204867],[-0.173026,0.0780453,0.197663],[0.254789,-0.121053,0.399191],[0.233005,0.00412142,0.343222],[-0.229303,0.238008,0.386866],[-0.245729,-0.000842276,0.451153],[0.593791,0.728655,0.563829],[-0.0349346,-0.175174,0.364523],[-0.019966,-0.122957,0.0929469]]],["rwyl_main_passenger_flatground_3",[[0.154414,0.348083,0.0310245],[-0.260477,0.463532,0.0425423],[-0.0226848,0.0678129,0.73586],[-0.133778,0.288846,0.0807307],[0.0398124,0.393912,0.113195],[0.176444,0.228531,0.118879],[-0.221813,0.172662,0.108777],[0.240137,-0.0351788,0.451877],[0.202448,0.0723616,0.313899],[-0.228435,0.189622,0.30762],[-0.241228,-0.00888875,0.43223],[0.0838544,0.839692,0.732278],[-0.0128592,-0.0894912,0.446501],[0.00101229,-0.0830768,0.170072]]],["rwyl_main_passenger_flatground_4",[[0.259715,0.199911,-0.0271724],[0.110532,0.450265,-0.0218378],[0.0699325,-0.113143,0.670252],[0.0125259,0.264504,0.00914644],[0.15729,0.2308,0.217375],[0.154256,0.0644171,0.217691],[-0.110002,0.239326,0.0248291],[0.278486,-0.182425,0.338778],[0.275911,-0.0697789,0.335059],[-0.0215888,0.0972955,0.342537],[-0.137746,-0.0878861,0.407971],[0.83476,0.528228,0.51967],[-0.0151308,-0.189063,0.363791],[-0.0287716,-0.112,0.0988885]]],["rwyl_main_vehicle_turnout_1",[[-0.133478,0.0215798,-0.789732],[0.0991856,0.00799407,-0.790155],[-0.0362225,-0.102611,0.624561],[-0.122117,0.0787948,-0.580161],[0.100293,0.061028,-0.587989],[0.117935,0.116324,-0.281793],[-0.107057,0.135626,-0.29402],[0.248434,-0.109455,0.415443],[0.252489,0.0276593,0.423],[-0.0516893,0.176321,0.413896],[-0.211827,0.0496159,0.419353],[-0.368595,0.487016,1.02129],[-0.04843,-0.0878519,0.316149],[-0.0159429,-0.030457,0.0464765]]],["rwyl_main_vehicle_turnout_2",[[-0.133646,0.0213253,-0.789585],[0.099236,0.0079772,-0.790202],[-0.0361037,-0.102428,0.624671],[-0.122174,0.0787828,-0.580169],[0.100236,0.0610356,-0.588019],[0.11791,0.116332,-0.281824],[-0.107085,0.135628,-0.294021],[0.232254,-0.106118,0.33884],[0.22639,0.0528386,0.259237],[-0.170572,0.130796,0.331547],[-0.233341,-0.0144159,0.319316],[0.387917,0.120912,1.015],[-0.0484243,-0.0877809,0.316212],[-0.0159387,-0.0304505,0.0464943]]],["rwyl_main_vehicle_coshooter_1",[[-0.0107254,0.436525,-0.191736],[0.373972,0.253697,-0.167313],[0.00139263,0.0420924,0.740508],[-0.0352365,0.364115,0.083801],[0.329602,0.178035,0.0914552],[0.263883,0.0730472,0.177404],[-0.0487727,0.262397,0.182751],[0.229764,-0.109003,0.425128],[0.237295,0.0114861,0.384523],[-0.0606924,0.276986,0.34722],[-0.170244,0.0871436,0.422538],[0.320764,0.805626,0.912645],[-0.0245692,-0.0523487,0.433503],[-0.0396611,-0.0680234,0.159444]]],["rwyl_main_vehicle_passenger_stand_1",[[-0.117385,0.366193,0.042766],[0.206093,-0.144663,0.0495356],[-0.0119367,0.315719,1.5188],[-0.134053,0.245532,0.326264],[0.14558,-0.128765,0.316454],[0.11092,-0.0686856,0.701447],[-0.101628,0.129585,0.705956],[0.295535,0.115876,1.39756],[0.358189,0.244922,1.31139],[-0.0527519,0.374631,1.13597],[-0.166172,0.238552,1.26968],[0.323098,1.17784,1.04856],[-0.0202465,0.116665,1.32],[-0.0387608,-0.00342342,1.06803]]],["rwyl_main_vehicle_passenger_stand_2",[[-0.15135,0.199975,-0.0488617],[0.179051,-0.0500158,-0.0422948],[-0.53277,0.0496836,1.34416],[-0.140631,0.134417,0.236061],[0.137052,-0.0779938,0.231619],[0.0882985,-0.0815664,0.612699],[-0.125591,0.0704971,0.608333],[-0.291587,0.188698,1.15361],[-0.417311,0.198487,1.09316],[-0.722955,0.0356099,1.02682],[-0.544021,-0.0688831,1.02798],[-1.0827,0.536943,1.66764],[-0.269487,-0.0272776,1.14731],[-0.0759466,-0.0841678,0.965161]]]];

#define LOD_GEOMETRYVIEW 6e15
private _unitBodySelectionPositions = _bodySelections apply {_unit selectionPosition [_x, LOD_GEOMETRYVIEW, "AveragePoint"]};
private _minTotalDistance = 100000;
private _FFVType = "";

{
    _x params ["_xFFVType", "_xBodySelectionPositions"];
    private _xTotalDistance = 0;
    {
        private _xDistance = _x distance (_unitBodySelectionPositions select _forEachIndex);
        _xTotalDistance = _xTotalDistance + _xDistance;
    } forEach _xBodySelectionPositions;

    if (_xTotalDistance < _minTotalDistance) then {
        _minTotalDistance = _xTotalDistance;
        _FFVType = _xFFVType;
    };
} forEach _ffvBodySelectionPositions;

_FFVType

/*
[
  "passenger_inside_1",
  "passenger_inside_2",
  "passenger_inside_3",
  "passenger_inside_4",
  "passenger_inside_5",
  "passenger_inside_6",
  "passenger_inside_7",
  "passenger_inside_8",
  "passenger_bench_1",
  "passenger_boat_1",
  "passenger_boat_2",
  "passenger_boat_3",
  "passenger_boat_4",
  "passenger_flatground_1",
  "passenger_flatground_2",
  "passenger_flatground_3",
  "passenger_flatground_4",
  "vehicle_turnout_1",
  "vehicle_turnout_2",
  "vehicle_coshooter_1",
  "vehicle_passenger_stand_1",
  "vehicle_passenger_stand_2"
]
*/
